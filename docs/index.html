<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Generative Art by Eric</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script type="text/javascript">
    /* lol... this is what suckers did before React came along */
    function buildCard(image, description) {
      const card = document.createElement("div")
      card.classList.add('card')
      card.appendChild(image)
      card.appendChild(description)
      return card
    }

    function buildImage(imageSrc, imageSrcSmall, title) {
      const a = document.createElement("a")
      a.setAttribute("href", imageSrc)
      a.setAttribute("target", "_blank")

      const img = document.createElement("img")
      img.setAttribute("src", imageSrcSmall)
      img.setAttribute("alt", title)

      a.appendChild(img)
      return a
    }

    function buildSourceCodeLink(sourceCodeLink) {
      const a = document.createElement("a")
      a.classList.add("source")
      a.setAttribute("href", sourceCodeLink)
      a.appendChild(document.createTextNode("source code"))
      return a
    }

    function buildDescription(content, sourceCodeLink) {
      const description = document.createElement("div")
      description.classList.add('description')
      /* I mean... pretty unsafe, but hey, sometimes you gotta live on the edge 😎 */
      description.innerHTML = content
      description.appendChild(
        document.createElement("br")
      )
      description.appendChild(
        buildSourceCodeLink(sourceCodeLink)
      )
      return description
    }

    function populateImage(cardsContainer) {
      return (image) => {
        console.log(image)
        const description = buildDescription(image.description, image.sourceCodeLink)
        const Image = buildImage(image.imageSrc, image.imageSrcSmall, image.title)
        const card = buildCard(Image, description)
        cardsContainer.appendChild(card)
      }
    }

    function populateImages(images) {
      const cardsContainer = document.getElementById("cards")
      images.forEach(populateImage(cardsContainer))
    }
    
    function fetchImages(_event) {
      fetch('/generative-art/images.json')
        .then(response => response.json())
        .then(data => populateImages(data.images))
        .catch(console.error.bind(console));
    }

    window.addEventListener('load', fetchImages)
  </script>

  <style>
    html, body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      --bg-color: #fcf0d1;
      --border-color: #999;
      --shadow-color: #999999aa;
      --font-color: #333;
      --link-color: #5391c1;

      background: var(--bg-color);
      font-size: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    h1,
    h2,
    h3 {
      text-align: center;
      color: var(--font-color);
    }

    .source {
      font-family: monospace;
      font-weight: 900;
    }

    .github-logo {
      width: 1em;
      transition: 0.3s all;
    }

    .github-logo:hover {
      transform: translateY(-0.05em);
      box-shadow: 0em 0.05em 0.1em var(--shadow-color);
    }

    .vert-container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      justify-content: space-between;
    }

    .vert-spacer {
      flex: 1 1 auto;
    }

    .cards {
      display: flex;
      align-items: flex-start;
      justify-items: center;
      justify-content: space-between;
      padding: 1em;
      flex-direction: row;
      flex-wrap: wrap;
    }

    .card {
      max-width: 30em;
      min-width: 15em;
      text-decoration: none;
      color: var(--font-color);
      margin-bottom: 2em;
    }

    @media screen and (max-width: 500px) {
      .card {
        min-width: 7.5em;
      }
    }

    .card .description {
      text-decoration: none;
      color: var(--font-color);
    }

    a,
    a:active,
    a:visited,
    a:hover,
    a:link {
      color: var(--link-color);
    }

    .card img {
      width: 100%;
      border: 1px solid var(--border-color);
      transition: 0.3s all;
    }

    .card img:hover {
      transform: translateY(-0.25em);
      box-shadow: 0em 0.25em 0.9em var(--shadow-color);
    }

    footer {
      text-align: center;
      width: 100%;
      padding: 2em 0;
    }
  </style>
</head>

<body>

  <!-- well guess we gotta call it something 🙄 -->

  <!-- Put all the junk here 🗑️ -->
  <div class="vert-container">

    <!-- Thanks to https://github.com/edent/SuperTinyIcons/blob/fef4b0e576726f4f78c5707327281e689b5b5801/images/svg/github.svg for the icon -->
    <h1 class="source">Generative art
      <a href="https://github.com/ericyd/generative-art">
      <svg xmlns="http://www.w3.org/2000/svg"
      class="github-logo"
        aria-label="GitHub" role="img"
        viewBox="0 0 512 512"><rect
        width="512" height="512"
        rx="15%"
        fill="#1B1817"/>
        <path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/>
      </svg>
    </a></h1>
    <h2 class="source">by eric</h2>
    <h3 class="source">made with <a href="https://openrndr.org/" target="_blank">OPENRNDR</a></h3>

    <div class="cards" id="cards">
      <!-- Cards are populated dynamically from data in images.json -->
    </div>

    <div class="vert-spacer"></div>
    <footer>
      Thanks to <a href="https://cloudinary.com/">Cloudinary</a> for the free image hosting tier, and <a href="https://github.com/edent/SuperTinyIcons/blob/fef4b0e576726f4f78c5707327281e689b5b5801/images/svg/github.svg">SuperTinyIcons</a> for the Github logo!
      <br>
      Thanks to the generative art community for unending inspiration.
    </footer>
  </div>
</body>

</html>
